#include <Windows.h>  // подключаем библиотеку для русского языка
#include <iostream> // подключение библиотеки для ввода-вывода
#include <vector>   // подключение библиотеки для работы с динамическими массивами
using namespace std; // объявляем использование стандартного пространства имен

int binarySearch(const vector<int>& arr, int left, int right, int target) { // бинарный поиск
    while (left <= right) { // пока диапазон не исчерпан
        int mid = left + (right - left) / 2; // нахождение среднего индекса
        if (arr[mid] == target) // если нашли искомое число
            return mid; // возвращаем индекс
        else if (arr[mid] < target) // если среднее меньше искомого
            left = mid + 1; // ищем в правой половине
        else // если среднее больше искомого
            right = mid - 1; // ищем в левой половине
    }
    return -1; // если не нашли - возвращаем -1
}

int exponentialSearch(const vector<int>& arr, int target) { // экспоненциальный поиск
    if (arr[0] == target) // если первый элемент — искомое число
        return 0; // возвращаем его индекс
    int n = arr.size(); // размер массива
    int bound = 1; // начинаем с индекса 1 для расширения диапазона поиска
    // расширяем диапазон экспоненциально (1,2,4,8,...)
    while (bound < n && arr[bound] < target) {  // пока граница внутри массива и текущий элемент меньше искомого
        bound *= 2; // удваиваем границу
    }
    int left = bound / 2; // левая граница - предыдущий диапазон
    int right = min(bound, n - 1); // правая граница - это минимум между текущей границей и концом массива
    return binarySearch(arr, left, right, target); // бинарный поиск в найденном диапазоне
}

int main() {
    SetConsoleCP(65001);  // чтобы вводить на русском языке
    SetConsoleOutputCP(65001);  // чтобы выводить на русском языке
    vector<int> arr = {1, 2, 4, 6, 8}; // отсортированный массив
    int target = 2; // число, которое ищем
    int index = exponentialSearch(arr, target); // вызов экспоненциального поиска
    if (index != -1) // если нашли число
        cout << "Элемент " << target << " найден по индексу " << index << endl; // выводим результат
    else // если не нашли
        cout << "Элемент " << target << " не найден" << endl; // выводим сообщение об отсутствии
}
