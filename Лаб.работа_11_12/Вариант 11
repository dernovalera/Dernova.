def perestanovka(s):  # объявление функции генерации перестановок строки s
    res = []  # список для хранения всех перестановок
    arr = list(s)  # переводим строку в список символов (удобнее менять позиции)
    def backtrack(i):  # рекурсивная функция, принимает индекс i — текущую позицию, которую нужно заполнить
        if i == len(arr):  # если i == длина массива, значит все позиции зафиксированы
            res.append(''.join(arr)) # собираем элементы массива в строку
            return
        seen = set()  # множество для отсечения дублирующихся вариантов при одинаковых символах (чтобы один и тот же символ не был использован два раза на этой позиции)
        for j in range(i, len(arr)): # пробегаем все возможные символы, которые можно поставить на позицию i
            if arr[j] in seen:  # если этот символ уже использовался на этой позиции
                continue  # пропускаем, чтобы не генерировать дубликаты
            seen.add(arr[j])   # отмечаем символ как использованный на позиции i
            arr[i], arr[j] = arr[j], arr[i] # меняем символы местами — фиксируем arr[j] на позиции i
            backtrack(i+1)  # вызываем функцию для заполнения следующих позиций
            arr[i], arr[j] = arr[j], arr[i]  # возвращаем массив в исходное состояние
    backtrack(0)   # запускаем backtrack с позиции 0
    return res   # возвращаем список всех перестановок
print(perestanovka("abc"))
